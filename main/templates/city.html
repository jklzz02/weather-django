{% extends "layout.html" %}
{% load static %}
{% block title %}
{% if not error %}
 {{city}}
{% else %}
 Not Found
{% endif %}
{% endblock title %}

{% block content %}
{% if city_info and not error %}

<article class="city-query-container">

    <section class="city-query-box">

        <header>
          <h2>{{city_info.name}}</h2>
          <!-- da vedere come gesire anche questa  <h2>{{city_info.sys.country}}</h2> -->
        </header>
        <time class="date" datetime="{{date}}">{{date}}</time>

        <section>
            <strong style="font-size: 46px;"> {{city_info.main.temp|floatformat:"0"}}°C</strong>
            <!--
              BISOGNA SOLO DECIDERE COME E DOVE METTERE I GRADI PERCEPITI

            <strong>Percepiti  {{city_info.main.feels_pke|floatformat:"0"}}°C</strong>
            -->
            {% for item in city_info.weather %}
            <figure class="info-container">
              <img src="https://openweathermap.org/img/wn/{{item.icon}}@2x.png" alt="{{item.description}}">
              <figcaption>{{item.description}} </figcaption>
            </figure>
            {% endfor %}
        </section>

        <footer class="query-infos">
          <p>Umidità {{city_info.main.humidity}}%</p>
          <p>Vento {{city_info.wind.speed}} m/s</p>
        </footer>

    </section>

</article>
  <!--
   BOZZA PER INCORPORARE LA MAPPA DEL LUOGO

  <iframe
  width="450"
  height="250"
  frameborder="0" style="border:0"
  referrerpolicy="no-referrer-when-downgrade"
  src="https://www.google.com/maps/embed/v1/view?key={{map_key}}&center={{city_info.coord.lat}},{{city_info.coord.lon}}"
  allowfullscreen>
  </iframe>
-->
{% else %}
<div class="error-box">
  <h2>città -{{ city }}- non trovata</h2>
  <img class="error-icon" src="{% static "img/not-found.svg" %}">
</div>
{% endif %}

{% if forecast_info %}
<section class="forecast-container">
{% for day in forecast_info %}
<article class="forecast-box">
  <header>
    <h2>{{city_info.name}}</h2>
    <time  class="date" datetime="{{day.data}}"><span>{{day.data}}</span></time>
  </header>
  <section>
    <h3>Temperatura</h3>
    <ul>
      <li>mattina {{day.temp.day|floatformat:"0"}}°C</li>
      <li>pomeriggio {{day.temp.eve|floatformat:"0"}}°C</li>
      <li>sera {{day.temp.night|floatformat:"0"}}°C</li>
    </ul>
  </section>
  <section>
    <p>{{day.summary}}</p>
  </section>
    {% for info in day.weather %}
    <figure class="info-container">
      <img src="https://openweathermap.org/img/wn/{{info.icon}}@2x.png" alt="{{info.description}}">
      <figcaption>{{info.description}} </figcaption>
    </figure>
    <aside>
      <span>Umidità {{day.humidity}}%</span>
      <span>Vento {{day.wind}} m/s</span>
    </aside>
    {% endfor %}
  {% if forecast_info.alert %}
    <p>{{forecast_info.alert}}</p>
  {% endif %}
</article>

{% endfor %}
</section>
{% endif %}

{% endblock content %}